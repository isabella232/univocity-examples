===[ food_name ]===
id___
0____
1____
2____

===[ food_name_details ]===
id___loc___description___
0____0_____butter________
1____0_____cheese________
2____0_____milk shakes___


===[ food ]===
id___name_id___carbohydrate_factor___fat_factor___protein_factor___nitrogen_protein_factor___
0____0_________8.87__________________1.89_________4.27_____________2.38______________________
1____0_________1.87__________________2.79_________3.27_____________8.38______________________
2____1_________3.87__________________4.59_________9.27_____________4.38______________________
3____1_________8.87__________________6.79_________5.27_____________4.38______________________
4____1_________3.87__________________2.79_________6.27_____________5.38______________________
5____1_________3.89__________________8.79_________6.27_____________6.36______________________
6____1_________3.12__________________8.13_________4.22_____________6.33______________________
7____1_________3.13__________________0.79_________4.67_____________4.78______________________
8____2_________1.87__________________3.79_________0.27_____________8.38______________________
9____2_________3.87__________________3.69_________8.97_____________3.98______________________


===[ food_state ]===
id___
0____
1____
2____
3____
4____
5____
6____
7____
8____
9____
10___

===[ food_state_details ]===
id___loc___description___
0____0_____blue__________
1____0_____brick_________
2____0_____camembert_____
3____0_____caraway_______
4____0_____cheddar_______
5____0_____cheshire______
6____0_____salted________
7____0_____thick chocolat
8____0_____thick vanilla_
9____0_____whipped_______
10___0_____with salt_____


===[ state_of_food ]===
food_id___state_id___sequence___
0_________6__________1__________
1_________9__________1__________
1_________10_________2__________
2_________0__________1__________
3_________1__________1__________
4_________2__________1__________
5_________3__________1__________
6_________4__________1__________
7_________5__________1__________
8_________7__________1__________
9_________8__________1__________


---[ Query to reconstruct the information we've just mapped from the input ]---
 SELECT n.description AS name, s1.description AS food_state_1,  s2.description AS food_state_2, f.carbohydrate_factor AS carbs,
	  f.fat_factor AS fat, f.protein_factor AS proteins, f.nitrogen_protein_factor AS nitrogen 
 FROM food f 
 JOIN food_name_details n ON n.id = f.name_id 
 JOIN state_of_food j1 ON j1.food_id = f.id AND j1.sequence = 1 
 JOIN food_state_details s1 ON s1.id = j1.state_id 
 LEFT JOIN state_of_food j2 ON j2.food_id = f.id AND j2.sequence = 2 
 LEFT JOIN food_state_details s2 ON s2.id = j2.state_id 
 ORDER BY name, food_state_1, food_state_2

===[ Query result ]===
name_________________food_state_1___food_state_2___nitrogen___proteins___fat____________carbs___
butter_______________salted________________________2.38_______4.27_______1.89___________8.87____
butter_______________whipped________with salt______8.38_______3.27_______2.79___________1.87____
cheese_______________blue__________________________4.38_______9.27_______4.59___________3.87____
cheese_______________brick_________________________4.38_______5.27_______6.79___________8.87____
cheese_______________camembert_____________________5.38_______6.27_______2.79___________3.87____
cheese_______________caraway_______________________6.36_______6.27_______8.79___________3.89____
cheese_______________cheddar_______________________6.33_______4.22_______8.13___________3.12____
cheese_______________cheshire______________________4.78_______4.67_______0.79___________3.13____
milk shakes__________thick chocolate_______________8.38_______0.27_______3.79___________1.87____
milk shakes__________thick vanilla_________________3.98_______8.97_______3.69___________3.87____


